---
import "../../assets/css/global.css";
import "../../assets/css/markdown.css";
import BaseLayout from "./BaseLayout.astro";
import { useDocumentation } from "@/utils";
import * as astroContent from "astro:content";
import Sidebar from "@/components/elements/sidebar";
import config from "../../../explainer.config";

const { load } = useDocumentation(astroContent);
const documentations = await load();

const { id, title, description } = Astro.props;
---

<BaseLayout
  title={`${title} â€¢ ${config.projectName}`}
  description={description}
  thumbnail={`/docs/${id}/thumbnail.png`}
>
  <main class="relative flex-1">
    <div class="mx-auto px-2 sm:px-0 max-w-[var(--container-width)]">
      <div class="flex flex-col lg:grid lg:grid-cols-10 lg:gap-8">
        <aside class="hidden lg:block lg:col-span-2 pr-2">
          <div
            class="fixed left-5 md:left-auto top-14 px-4 sm:px-0 py-8 overflow-y-auto h-[calc(100vh-4rem)] w-[225px] z-10 bg-background"
          >
            <Sidebar
              client:load
              transition:persist
              documentations={documentations}
              currentPathname={Astro.url.pathname}
            />
          </div>
        </aside>
        <div class="border-b border-dashed border-border py-2.5 px-4 lg:hidden">
          <details class="group w-full">
            <summary
              class="text-sm font-semibold w-full flex items-center justify-between cursor-pointer"
            >
              <span>Navigation</span>
              <svg
                class="h-4 w-4 transition-transform group-open:rotate-180"
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19 9l-7 7-7-7"></path>
              </svg>
            </summary>
            <div class="py-4 overflow-y-auto max-h-[60vh]">
              <Sidebar
                client:load
                documentations={documentations}
                currentPathname={Astro.url.pathname}
              />
            </div>
          </details>
        </div>
        <slot />
      </div>
    </div>
  </main>
</BaseLayout>
